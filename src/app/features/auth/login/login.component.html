<div class="login-container">
  <!-- Space Background -->
  <app-space-background></app-space-background>

  <div class="login-box">
    <!-- Icon and brand name -->
    <div class="brand-header">
      <mat-icon class="brand-icon-large">{{ brandIcon }}</mat-icon>
      <h1 class="headline-large">{{ brandName }}</h1>
    </div>

    <!-- Welcome Message -->
    <div class="welcome-message">
      <h2 class="headline-medium">{{ welcomeMessage }}</h2>
    </div>

    <!-- Login Form -->
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="login-form">
      <!-- Username/Email -->
      <mat-form-field appearance="outline" class="input-field">
        <mat-label>Usuario</mat-label>
        <input
          matInput
          type="email"
          placeholder="tu@email.com"
          formControlName="email"
          [disabled]="loading"
        />
        <mat-icon matPrefix>person_outline</mat-icon>

        <mat-error *ngIf="form.get('email')?.hasError('required')">
          El email es requerido
        </mat-error>
        <mat-error *ngIf="form.get('email')?.hasError('email')"> Email inválido </mat-error>
      </mat-form-field>

      <!-- Password -->
      <mat-form-field appearance="outline" class="input-field">
        <mat-label>Contraseña</mat-label>
        <input
          matInput
          [type]="showPassword() ? 'text' : 'password'"
          placeholder="••••••••"
          formControlName="password"
          [disabled]="loading"
        />
        <mat-icon matPrefix>lock_outline</mat-icon>

        <button
          mat-icon-button
          matSuffix
          type="button"
          (click)="togglePassword()"
          [disabled]="loading"
        >
          <mat-icon>{{ showPassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>

        <mat-error *ngIf="form.get('password')?.hasError('required')">
          La contraseña es requerida
        </mat-error>
      </mat-form-field>

      <!-- Divider -->
      <mat-divider class="form-divider"></mat-divider>

      <!-- Login Button -->
      <button
        mat-flat-button
        color="primary"
        class="login-btn"
        type="submit"
        [disabled]="loading || form.invalid"
      >
        <span *ngIf="!loading">{{ buttonLabel }}</span>
        <span *ngIf="loading">Cargando...</span>
      </button>

      <!-- Register Link -->
      <div class="register-link" *ngIf="showRegisterLink">
        <span>¿No tienes cuenta?</span>
        <a href="javascript:void(0)" (click)="onRegister()">Regístrate aquí</a>
      </div>
    </form>
  </div>
</div>
